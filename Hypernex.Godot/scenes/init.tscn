[gd_scene load_steps=15 format=3 uid="uid://s7eucmua8sgd"]

[ext_resource type="Script" path="res://scripts/Init.cs" id="1_07r2y"]
[ext_resource type="Script" path="res://scripts/ui/LoginScreen.cs" id="2_qliqn"]
[ext_resource type="PackedScene" uid="uid://dyvx634j6ne8i" path="res://scenes/remote_player.tscn" id="3_gx5fr"]
[ext_resource type="Script" path="res://scripts/ui/MainOverlay.cs" id="3_yxb3m"]
[ext_resource type="Script" path="res://scripts/ui/FriendsController.cs" id="4_1wv3s"]
[ext_resource type="PackedScene" uid="uid://ct7xyaxn1p1cf" path="res://scenes/card.tscn" id="5_m63s1"]
[ext_resource type="Script" path="res://scripts/ui/RequestsController.cs" id="6_0f1ly"]
[ext_resource type="Script" path="res://scripts/ui/WorldsController.cs" id="7_yw38d"]
[ext_resource type="Script" path="res://scripts/ui/InstanceController.cs" id="8_exjdl"]
[ext_resource type="PackedScene" uid="uid://b4nrx2xxp1xio" path="res://scenes/player.tscn" id="9_cj1hm"]
[ext_resource type="PackedScene" uid="uid://bc42bxyk4uvjk" path="res://scenes/big_card.tscn" id="11_6bljf"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_mgffp"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_t3dit"]
sky_material = SubResource("ProceduralSkyMaterial_mgffp")

[sub_resource type="Environment" id="Environment_ukjnl"]
background_mode = 2
sky = SubResource("Sky_t3dit")
tonemap_mode = 2
glow_enabled = true

[node name="Init" type="Node" node_paths=PackedStringArray("login", "overlay", "ui")]
script = ExtResource("1_07r2y")
login = NodePath("UI/Login/LoginScreen")
overlay = NodePath("UI/MainOverlay/Overlay")
ui = NodePath("UI")
localPlayerScene = ExtResource("9_cj1hm")
remotePlayerScene = ExtResource("3_gx5fr")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_ukjnl")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="AcceptDialog" type="AcceptDialog" parent="UI"]
initial_position = 2

[node name="Login" type="VBoxContainer" parent="UI"]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="LoginScreen" type="Node" parent="UI/Login" node_paths=PackedStringArray("root", "usernameEdit", "passwordEdit", "twoFactorEdit", "loginButton", "loginOptions", "messagePopup")]
script = ExtResource("2_qliqn")
root = NodePath("..")
usernameEdit = NodePath("../Username")
passwordEdit = NodePath("../Password")
twoFactorEdit = NodePath("../2FA")
loginButton = NodePath("../LoginBtn")
loginOptions = NodePath("../LoginOptions")
messagePopup = NodePath("../../AcceptDialog")

[node name="Username" type="LineEdit" parent="UI/Login"]
layout_mode = 2
placeholder_text = "Username"
alignment = 1

[node name="Password" type="LineEdit" parent="UI/Login"]
layout_mode = 2
placeholder_text = "Password"
alignment = 1
secret = true

[node name="2FA" type="LineEdit" parent="UI/Login"]
layout_mode = 2
placeholder_text = "2FA Code (optional)"
alignment = 1

[node name="LoginBtn" type="Button" parent="UI/Login"]
layout_mode = 2
text = "Login"

[node name="LoginOptions" type="OptionButton" parent="UI/Login"]
layout_mode = 2

[node name="MainOverlay" type="PanelContainer" parent="UI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Overlay" type="Node" parent="UI/MainOverlay" node_paths=PackedStringArray("root", "tabs", "logoutButton", "exitButton")]
script = ExtResource("3_yxb3m")
root = NodePath("..")
tabs = NodePath("../TabContainer")
logoutButton = NodePath("../TabContainer/Settings/LogoutBtn")
exitButton = NodePath("../TabContainer/Settings/ExitBtn")
currentInstanceIdx = 2
bigCardUI = ExtResource("11_6bljf")

[node name="TabContainer" type="TabContainer" parent="UI/MainOverlay"]
layout_mode = 2

[node name="Home" type="VBoxContainer" parent="UI/MainOverlay/TabContainer"]
layout_mode = 2

[node name="Friends" type="RichTextLabel" parent="UI/MainOverlay/TabContainer/Home"]
layout_mode = 2
bbcode_enabled = true
text = "Friends"
fit_content = true
scroll_active = false
shortcut_keys_enabled = false

[node name="Controller" type="Node" parent="UI/MainOverlay/TabContainer/Home/Friends" node_paths=PackedStringArray("label", "container")]
script = ExtResource("4_1wv3s")
label = NodePath("..")
container = NodePath("../../ScrollContainer/HBoxContainer")
friendUI = ExtResource("5_m63s1")

[node name="ScrollContainer" type="ScrollContainer" parent="UI/MainOverlay/TabContainer/Home"]
custom_minimum_size = Vector2(250, 100)
layout_mode = 2
size_flags_vertical = 3

[node name="HBoxContainer" type="HBoxContainer" parent="UI/MainOverlay/TabContainer/Home/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Requests" type="RichTextLabel" parent="UI/MainOverlay/TabContainer/Home"]
layout_mode = 2
bbcode_enabled = true
text = "Friend Requests"
fit_content = true
scroll_active = false
shortcut_keys_enabled = false

[node name="Controller" type="Node" parent="UI/MainOverlay/TabContainer/Home/Requests" node_paths=PackedStringArray("label", "container")]
script = ExtResource("6_0f1ly")
label = NodePath("..")
container = NodePath("../../ScrollContainer2/HBoxContainer")
friendUI = ExtResource("5_m63s1")

[node name="ScrollContainer2" type="ScrollContainer" parent="UI/MainOverlay/TabContainer/Home"]
custom_minimum_size = Vector2(250, 100)
layout_mode = 2
size_flags_vertical = 3

[node name="HBoxContainer" type="HBoxContainer" parent="UI/MainOverlay/TabContainer/Home/ScrollContainer2"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Worlds" type="VBoxContainer" parent="UI/MainOverlay/TabContainer"]
visible = false
layout_mode = 2

[node name="Instances" type="RichTextLabel" parent="UI/MainOverlay/TabContainer/Worlds"]
layout_mode = 2
bbcode_enabled = true
text = "Active Instances"
fit_content = true
scroll_active = false
shortcut_keys_enabled = false

[node name="Controller" type="Node" parent="UI/MainOverlay/TabContainer/Worlds/Instances" node_paths=PackedStringArray("label", "container")]
script = ExtResource("8_exjdl")
label = NodePath("..")
container = NodePath("../../ScrollContainer2")
worldUI = ExtResource("5_m63s1")

[node name="ScrollContainer2" type="ScrollContainer" parent="UI/MainOverlay/TabContainer/Worlds"]
custom_minimum_size = Vector2(250, 100)
layout_mode = 2
size_flags_vertical = 3

[node name="HBoxContainer" type="HBoxContainer" parent="UI/MainOverlay/TabContainer/Worlds/ScrollContainer2"]
layout_mode = 2

[node name="MyWorlds" type="RichTextLabel" parent="UI/MainOverlay/TabContainer/Worlds"]
layout_mode = 2
bbcode_enabled = true
text = "My Worlds"
fit_content = true
scroll_active = false
shortcut_keys_enabled = false

[node name="Controller" type="Node" parent="UI/MainOverlay/TabContainer/Worlds/MyWorlds" node_paths=PackedStringArray("label", "container")]
script = ExtResource("7_yw38d")
labelFormat = "[center]My Worlds ({0})[/center][right][url]Refresh[/url][/right]"
label = NodePath("..")
container = NodePath("../../ScrollContainer/HBoxContainer")
worldUI = ExtResource("5_m63s1")

[node name="ScrollContainer" type="ScrollContainer" parent="UI/MainOverlay/TabContainer/Worlds"]
custom_minimum_size = Vector2(250, 100)
layout_mode = 2
size_flags_vertical = 3

[node name="HBoxContainer" type="HBoxContainer" parent="UI/MainOverlay/TabContainer/Worlds/ScrollContainer"]
layout_mode = 2

[node name="Current Instance" parent="UI/MainOverlay/TabContainer" instance=ExtResource("11_6bljf")]
visible = false
layout_mode = 2
usersLabelFormat = "[center]Users ({0})[/center][right][url]Refresh[/url][/right][right][url=leave]Leave[/url][/right]"

[node name="Settings" type="VBoxContainer" parent="UI/MainOverlay/TabContainer"]
visible = false
layout_mode = 2

[node name="LogoutBtn" type="Button" parent="UI/MainOverlay/TabContainer/Settings"]
layout_mode = 2
text = "Logout"

[node name="ExitBtn" type="Button" parent="UI/MainOverlay/TabContainer/Settings"]
layout_mode = 2
text = "Exit :("
